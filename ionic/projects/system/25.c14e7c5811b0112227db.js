(window.webpackJsonp=window.webpackJsonp||[]).push([[25],{l6YW:function(e,t,i){"use strict";i.r(t),i.d(t,"ResetPasswordPageModule",function(){return _});var n=i("tyNb");class o{constructor(){this.email_is_valid=!1,this.token_is_valid=!1}validateEmail(e){this.email_is_valid=!e}validateToken(e){this.token_is_valid=!e}skipEmail(){this.email_is_valid=!0}get stage(){return this.email_is_valid?this.token_is_valid?3:2:1}at(e){return this.stage==e}get email_data(){return{email:this.email}}get validate_token_data(){return{token:this.token,email:this.email}}get update_password_data(){return{token:this.token,email:this.email,password:this.password,password_confirmation:this.password_confirmation}}}var s=i("fXoL"),r=i("IfTO"),a=i("TEn/"),c=i("hBPn"),d=i("ofXK"),l=i("3Pt+"),b=i("tmjD");function u(e,t){if(1&e){const e=s.Sb();s.Rb(0,"ion-row",15),s.Rb(1,"ion-col"),s.Rb(2,"div",16),s.zc(3,"A code will be sent to your email "),s.Qb(),s.Rb(4,"ion-input",17),s.Zb("keypress.enter",function(){return s.sc(e),s.dc().sendEmail()})("ngModelChange",function(t){return s.sc(e),s.dc().data.email=t}),s.Qb(),s.Qb(),s.Qb()}if(2&e){const e=s.dc();s.zb(4),s.jc("ngModel",e.data.email)}}function h(e,t){if(1&e){const e=s.Sb();s.Rb(0,"ion-row",18),s.Rb(1,"ion-col"),s.Rb(2,"div",16),s.zc(3,"Enter the code sent to your email"),s.Qb(),s.Rb(4,"input",19),s.Zb("keypress.enter",function(){return s.sc(e),s.dc().validateResetToken()})("ngModelChange",function(t){return s.sc(e),s.dc().data.token=t}),s.Qb(),s.Rb(5,"ion-input",20),s.Zb("keypress.enter",function(){return s.sc(e),s.dc().validateResetToken()})("ngModelChange",function(t){return s.sc(e),s.dc().data.email=t}),s.Qb(),s.Qb(),s.Qb()}if(2&e){const e=s.dc();s.zb(4),s.jc("ngModel",e.data.token),s.zb(1),s.jc("ngModel",e.data.email)}}function p(e,t){if(1&e){const e=s.Sb();s.Rb(0,"ion-row",21),s.Rb(1,"ion-col"),s.Rb(2,"ion-label",22),s.zc(3,"New password"),s.Qb(),s.Rb(4,"ion-input",23),s.Zb("keypress.enter",function(){return s.sc(e),s.dc().updatePassword()})("ngModelChange",function(t){return s.sc(e),s.dc().data.password=t}),s.Qb(),s.Rb(5,"ion-icon",24),s.Zb("click",function(){s.sc(e);const t=s.dc();return t.showPassword=!t.showPassword}),s.Qb(),s.Qb(),s.Qb()}if(2&e){const e=s.dc();s.zb(4),s.kc("type",e.showPassword?"text":"password"),s.jc("ngModel",e.data.password),s.zb(1),s.kc("name",e.showPassword?"eye":"eye-off")}}function m(e,t){if(1&e){const e=s.Sb();s.Rb(0,"ion-row"),s.Rb(1,"ion-col"),s.Rb(2,"ion-label",22),s.zc(3,"Confirm password"),s.Qb(),s.Rb(4,"ion-input",23),s.Zb("keypress.enter",function(){return s.sc(e),s.dc().updatePassword()})("ngModelChange",function(t){return s.sc(e),s.dc().data.password_confirmation=t}),s.Qb(),s.Rb(5,"ion-icon",24),s.Zb("click",function(){s.sc(e);const t=s.dc();return t.showPassword=!t.showPassword}),s.Qb(),s.Qb(),s.Qb()}if(2&e){const e=s.dc();s.zb(4),s.kc("type",e.showPassword?"text":"password"),s.jc("ngModel",e.data.password_confirmation),s.zb(1),s.kc("name",e.showPassword?"eye":"eye-off")}}function g(e,t){if(1&e){const e=s.Sb();s.Rb(0,"ion-button",25),s.Zb("click",function(){return s.sc(e),s.dc().sendEmail()}),s.zc(1,"Send e-mail"),s.Qb()}}function f(e,t){if(1&e){const e=s.Sb();s.Rb(0,"ion-button",26),s.Zb("click",function(){return s.sc(e),s.dc().validateResetToken()}),s.zc(1,"Valid c\xf3digo"),s.Qb()}}function w(e,t){if(1&e){const e=s.Sb();s.Rb(0,"ion-button",26),s.Zb("click",function(){return s.sc(e),s.dc().updatePassword()}),s.zc(1,"Save password"),s.Qb()}}function k(e,t){if(1&e){const e=s.Sb();s.Rb(0,"ion-button",27),s.Zb("click",function(){return s.sc(e),s.dc().skipEmail()}),s.zc(1,"I have a code"),s.Qb()}}const v=function(){return["/auth/login"]};let R=(()=>{class e{constructor(e,t,i,n){this.helperService=e,this.menu=t,this.router=i,this.userService=n,this.data=new o,this.showPassword=!1}ngOnInit(){if(this.userService.isLoggedIn)return this.router.navigate(["/dashboard"])}ionViewWillEnter(){this.data=new o,this.menu.enable(!1)}sendEmail(){this.helperService.loading("Sending e-mail"),this.userService.sendForgotPasswordEmail(this.data).then(e=>{this.data.validateEmail(e.error),this.helperService.loading_dismiss(),this.helperService.toast(e.error?"warning":"success",e.message)},e=>{this.helperService.loading_dismiss(),this.helperService.responseErrors(e)})}validateResetToken(){this.helperService.loading("Validating"),this.userService.validateResetToken(this.data).then(e=>{this.data.validateToken(e.valid),this.helperService.loading_dismiss()},e=>{this.helperService.responseErrors(e),this.helperService.loading_dismiss()})}skipEmail(){this.data.skipEmail()}updatePassword(){this.helperService.loading("Updating"),this.userService.updatePassword(this.data,["access_level.permissions"]).then(e=>{e.error&&(this.helperService.loading_dismiss(),e.user.password=this.data.password,this.userService.setUser(e,null),this.router.navigate(["/dashboard"])),this.helperService.toast(e.error?"warning":"success",e.message)},e=>{this.helperService.loading_dismiss(),this.helperService.responseErrors(e)})}}return e.\u0275fac=function(t){return new(t||e)(s.Lb(r.a),s.Lb(a.R),s.Lb(n.f),s.Lb(c.a))},e.\u0275cmp=s.Fb({type:e,selectors:[["app-reset-password"]],decls:26,vars:10,consts:[["size-md","8","offset-md","2","size-lg","6","offset-lg","3","size-xl","4","offset-xl","4"],["color","white"],[1,"text-center"],["src","./assets/images/logo_landscape.svg","width","400",1,"pt-20","pb-20"],["class","",4,"ngIf"],["class","mb-20 mt-20",4,"ngIf"],["class","mb-20",4,"ngIf"],[4,"ngIf"],["mode","ios","color","primary","expand","block",3,"click",4,"ngIf"],["mode","ios","color","success","expand","block",3,"click",4,"ngIf"],[1,"ion-text-center","mt-20"],["mode","ios","fill","outline","class","mt-10","color","customer","shape","round",3,"click",4,"ngIf"],[1,"ion-text-center"],[1,"p20","cursor-pointer",3,"routerLink"],[1,"text-medium"],[1,""],[1,"fw-600","pb-10","ion-text-center","text-primary"],["placeholder","E-mail*",1,"input-light","ion-text-center","pl-0",3,"ngModel","keypress.enter","ngModelChange"],[1,"mb-20","mt-20"],["maxlength","11","placeholder","\u2022 \u2022 \u2022 \u2022 \u2022","mask","A A A A A A",1,"input-light","ion-text-center","fs-1-5",3,"ngModel","keypress.enter","ngModelChange"],["placeholder","Informe seu e-mail*",1,"input-light","ion-text-center","mt-20",3,"ngModel","keypress.enter","ngModelChange"],[1,"mb-20"],["color","medium",1,"fw-600"],[1,"input-light",3,"type","ngModel","keypress.enter","ngModelChange"],["color","medium","item-right","",1,"icon-input",3,"name","click"],["mode","ios","color","primary","expand","block",3,"click"],["mode","ios","color","success","expand","block",3,"click"],["mode","ios","fill","outline","color","customer","shape","round",1,"mt-10",3,"click"]],template:function(e,t){1&e&&(s.Rb(0,"ion-content"),s.Rb(1,"ion-row"),s.Rb(2,"ion-col",0),s.Rb(3,"ion-card",1),s.Rb(4,"ion-card-content"),s.Rb(5,"ion-row"),s.Rb(6,"ion-col",2),s.Mb(7,"img",3),s.Qb(),s.Qb(),s.xc(8,u,5,1,"ion-row",4),s.xc(9,h,6,2,"ion-row",5),s.xc(10,p,6,3,"ion-row",6),s.xc(11,m,6,3,"ion-row",7),s.Rb(12,"ion-row"),s.Rb(13,"ion-col"),s.xc(14,g,2,0,"ion-button",8),s.xc(15,f,2,0,"ion-button",9),s.xc(16,w,2,0,"ion-button",9),s.Qb(),s.Qb(),s.Rb(17,"ion-row",10),s.Rb(18,"ion-col"),s.xc(19,k,2,0,"ion-button",11),s.Qb(),s.Qb(),s.Qb(),s.Qb(),s.Rb(20,"ion-row",12),s.Rb(21,"ion-col"),s.Rb(22,"div",13),s.Rb(23,"small"),s.Rb(24,"strong",14),s.zc(25,"back to login"),s.Qb(),s.Qb(),s.Qb(),s.Qb(),s.Qb(),s.Qb(),s.Qb(),s.Qb()),2&e&&(s.zb(8),s.jc("ngIf",t.data.at(1)),s.zb(1),s.jc("ngIf",t.data.at(2)),s.zb(1),s.jc("ngIf",t.data.at(3)),s.zb(1),s.jc("ngIf",t.data.at(3)),s.zb(3),s.jc("ngIf",t.data.at(1)),s.zb(1),s.jc("ngIf",t.data.at(2)),s.zb(1),s.jc("ngIf",t.data.at(3)),s.zb(3),s.jc("ngIf",t.data.at(1)),s.zb(3),s.jc("routerLink",s.lc(9,v)))},directives:[a.k,a.F,a.j,a.h,a.i,d.l,a.Y,n.g,a.r,a.Z,l.g,l.h,b.a,l.a,l.c,a.x,a.o,a.f],styles:[""]}),e})();var Q=i("HJNQ");const S=[{path:"",component:R}];let _=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=s.Jb({type:e}),e.\u0275inj=s.Ib({imports:[[Q.a,n.i.forChild(S)]]}),e})()}}]);