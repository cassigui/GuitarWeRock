(window.webpackJsonp=window.webpackJsonp||[]).push([[26],{xed9:function(e,n,i){"use strict";i.r(n),i.d(n,"IndexPageModule",function(){return O});var t=i("tyNb"),o=i("mrSG"),r=i("TEn/"),c=i("WqAO"),s=i("fXoL"),l=i("hBPn"),a=i("IfTO"),b=i("G2dz"),u=i("3Pt+"),d=i("ofXK");const h=["search"],f=function(){return["/users/create"]};function g(e,n){1&e&&(s.Rb(0,"ion-button",26),s.Mb(1,"ion-icon",27),s.Qb()),2&e&&s.jc("routerLink",s.lc(1,f))}function p(e,n){1&e&&s.Mb(0,"ion-col",17)}const m=function(e){return["/users",e]};function R(e,n){if(1&e&&(s.Rb(0,"ion-button",32),s.Mb(1,"ion-icon",33),s.zc(2," edit "),s.Qb()),2&e){const e=s.dc(2).$implicit;s.jc("routerLink",s.mc(1,m,e.id))}}const Q=function(){return{update:"users"}},v=function(e){return[e]};function z(e,n){1&e&&(s.Rb(0,"ion-col",17),s.xc(1,R,3,3,"ion-button",31),s.Qb()),2&e&&(s.zb(1),s.jc("ifAuth",s.mc(2,v,s.lc(1,Q))))}function x(e,n){if(1&e){const e=s.Sb();s.Rb(0,"ion-col",17),s.Rb(1,"ion-button",34),s.Zb("click",function(n){s.sc(e);const i=s.dc().$implicit,t=s.qc(1);return s.dc().remove(i,n,t)}),s.Mb(2,"ion-icon",35),s.zc(3,"\xa0delete "),s.Qb(),s.Qb()}}const w=function(e,n){return{"text-success":e,"text-danger":n}},k=function(){return{delete:"access_levels"}};function M(e,n){if(1&e&&(s.Rb(0,"ion-item-sliding",null,28),s.Rb(2,"ion-item"),s.Rb(3,"ion-col",17),s.zc(4),s.Qb(),s.Rb(5,"ion-col",17),s.zc(6),s.Qb(),s.Rb(7,"ion-col",18),s.zc(8),s.Qb(),s.Rb(9,"ion-col",17),s.Mb(10,"ion-icon",29),s.Rb(11,"span",30),s.zc(12),s.Qb(),s.Qb(),s.xc(13,z,2,4,"ion-col",19),s.xc(14,x,4,0,"ion-col",19),s.Qb(),s.Qb()),2&e){const e=n.$implicit;s.zb(4),s.Bc("#",e.id,""),s.zb(2),s.Bc(" ",e.name," "),s.zb(2),s.Bc(" ",e.email," "),s.zb(2),s.jc("ngClass",s.nc(7,w,e.active,!e.active)),s.zb(2),s.Ac(e.active?"Active":"Inactive"),s.zb(1),s.jc("ifAuth",s.mc(11,v,s.lc(10,Q))),s.zb(1),s.jc("ifAuth",s.mc(14,v,s.lc(13,k)))}}function j(e,n){1&e&&(s.Rb(0,"div"),s.Mb(1,"ion-skeleton-text",36),s.Qb())}function A(e,n){if(1&e&&(s.Pb(0),s.xc(1,j,2,0,"div",20),s.Ob()),2&e){const e=s.dc();s.zb(1),s.jc("ngForOf",e.trs)}}function S(e,n){if(1&e){const e=s.Sb();s.Rb(0,"ion-row",37),s.Rb(1,"ion-col",38),s.Rb(2,"ion-icon",39),s.Zb("click",function(){return s.sc(e),s.dc().content.scrollToTop(500)}),s.Qb(),s.Rb(3,"ion-label",40),s.zc(4," Todos registros foram listados "),s.Mb(5,"ion-icon",41),s.Qb(),s.Qb(),s.Qb()}if(2&e){const e=s.dc();s.zb(2),s.jc("hidden",e.users.length<10)}}function _(e,n){1&e&&(s.Rb(0,"ion-row",42),s.Rb(1,"ion-col",38),s.Rb(2,"ion-label",43),s.zc(3,"  Não há registros. "),s.Qb(),s.Qb(),s.Qb())}const y=function(){return{create:"users"}};let C=(()=>{class e{constructor(e,n){this.userService=e,this.helperService=n,this.users=[],this.loading=!1,this.filters={name:null},this.total_of_data=0,this._paginate={take:20,page:1},this.trs=new Array(5),this.tds=new Array(1)}ngOnInit(){}ionViewWillEnter(){this.paginate(null,null)}getFilters(){var e={};return Object.keys(this.filters).forEach(n=>{this.filters[n]&&(e[n]="id"==n?this.filters[n]:"%"+this.filters[n]+"%")},this),e.access_level_id=[1,2],e}paginate(e=null,n=null){return Object(o.a)(this,void 0,void 0,function*(){(null!==e||null==e&&null==n)&&(this.users=[],this._paginate.page=1),this.loading=!0,this.userService.get(["access_level"],this.getFilters(),this._paginate).then(i=>Object(o.a)(this,void 0,void 0,function*(){this.total_of_data=i.users.total,this._paginate.page=i.users.current_page+1;for(let e of i.users.data)this.users.push(new c.a(e));this.loading=!1,e&&e.target.complete(),n&&n.target.complete()}),e=>{this.helperService.responseErrors(e)})})}remove(e,n,i){return Object(o.a)(this,void 0,void 0,function*(){let t=yield this.helperService.popover(n,"He is sure?",[{text:"back",color:"gray",value:!1},{text:"remove",color:"danger",value:!0}]);t.onDidDismiss().then(n=>{!0===n.data?(this.helperService.loading("Removendo"),this.destroy(e,i)):i.close()}),t.present()})}destroy(e,n){this.userService.destroy(e.id).then(i=>{if(!i.error){var t=this.users.findIndex(n=>n.id==e.id);t>-1&&this.users.splice(t,1)}this.helperService.toast(i.error?"warning":"success",i.message),n.close()},e=>{this.helperService.responseErrors(e)}).then(()=>this.helperService.loading_dismiss())}toggleSearch(){this.showFilter=!this.showFilter,this.showFilter&&setTimeout(()=>{this.search.setFocus()},100)}}return e.\u0275fac=function(n){return new(n||e)(s.Lb(l.a),s.Lb(a.a))},e.\u0275cmp=s.Fb({type:e,selectors:[["app-index"]],viewQuery:function(e,n){if(1&e&&(s.Ec(h,1),s.Ec(r.k,1),s.Ec(r.p,1)),2&e){let e;s.pc(e=s.ac())&&(n.search=e.first),s.pc(e=s.ac())&&(n.content=e.first),s.pc(e=s.ac())&&(n.infiniteScroll=e.first)}},decls:42,vars:17,consts:[["mode","ios"],["mode","ios","slot","start"],[3,"click"],["slot","end"],["mode","ios","color","white",3,"routerLink",4,"ifAuth"],["mode","ios",3,"color","click"],["name","funnel"],[1,"ion-no-padding"],["slot","fixed",1,"text-darkprimary",3,"ionRefresh"],["pullingText","Atualizar","refreshingSpinner","dots","refreshingText","Atualizando"],["lines","full","mode","ios",1,"no-border","mb-0"],["color","customer","mode","md",3,"hidden"],["debounce","250","mode","ios","placeholder","id ...",1,"input-light","p0",3,"ngModel","ngModelChange","ionChange"],["search",""],["debounce","250","mode","ios","placeholder","name ...",1,"input-light","p0",3,"ngModel","ngModelChange","ionChange"],["debounce","250","mode","ios","placeholder","e-mail ...",1,"input-light","p0",3,"ngModel","ngModelChange","ionChange"],["mode","md"],["size","2"],["size","2",1,"ion-hide-sm-down"],["size","2",4,"ifAuth"],[4,"ngFor","ngForOf"],[4,"ngIf"],["threshold","30px",3,"ionInfinite"],["loadingSpinner","none"],["class","no-border","text-center","",4,"ngIf"],["color","light","text-center","",4,"ngIf"],["mode","ios","color","white",3,"routerLink"],["name","add-circle"],["slidingItem",""],["name","radio-button-on-outline",3,"ngClass"],[1,"ion-hide-sm-down"],["routerDirection","forward","expand","block","color","primary",3,"routerLink",4,"ifAuth"],["routerDirection","forward","expand","block","color","primary",3,"routerLink"],["slot","start","name","create"],["expand","block","color","danger",3,"click"],["slot","start","name","trash"],["animated","",2,"width","100%","height","50px"],["text-center","",1,"no-border"],[1,"text-center"],["color","medium","size","large","name","caret-up-circle-outline",1,"mt-15","ion-float-end",3,"hidden","click"],["color","medium",1,"p20"],["name","thumbs-up","color","medium"],["color","light","text-center",""],["padding-top","","padding-bottom",""]],template:function(e,n){1&e&&(s.Rb(0,"ion-header"),s.Rb(1,"ion-toolbar",0),s.Mb(2,"ion-menu-button",1),s.Rb(3,"ion-title",2),s.Zb("click",function(){return n.content.scrollToTop(500)}),s.zc(4,"Users"),s.Qb(),s.Rb(5,"ion-buttons",3),s.xc(6,g,2,2,"ion-button",4),s.Rb(7,"ion-button",5),s.Zb("click",function(){return n.toggleSearch()}),s.Mb(8,"ion-icon",6),s.Qb(),s.Qb(),s.Qb(),s.Qb(),s.Rb(9,"ion-content",7),s.Rb(10,"ion-refresher",8),s.Zb("ionRefresh",function(e){return n.paginate(e)}),s.Mb(11,"ion-refresher-content",9),s.Qb(),s.Rb(12,"ion-row"),s.Rb(13,"ion-col",7),s.Rb(14,"ion-list",10),s.Rb(15,"ion-item-divider",11),s.Rb(16,"ion-col"),s.Rb(17,"ion-searchbar",12,13),s.Zb("ngModelChange",function(e){return n.filters.id=e})("ionChange",function(){return n.paginate()}),s.Qb(),s.Qb(),s.Rb(19,"ion-col"),s.Rb(20,"ion-searchbar",14,13),s.Zb("ngModelChange",function(e){return n.filters.name=e})("ionChange",function(){return n.paginate()}),s.Qb(),s.Qb(),s.Rb(22,"ion-col"),s.Rb(23,"ion-searchbar",15,13),s.Zb("ngModelChange",function(e){return n.filters.email=e})("ionChange",function(){return n.paginate()}),s.Qb(),s.Qb(),s.Qb(),s.Rb(25,"ion-item-divider",16),s.Rb(26,"ion-col",17),s.zc(27,"#Id"),s.Qb(),s.Rb(28,"ion-col",17),s.zc(29,"Name"),s.Qb(),s.Rb(30,"ion-col",18),s.zc(31,"E-mail"),s.Qb(),s.Rb(32,"ion-col",17),s.zc(33,"Active"),s.Qb(),s.xc(34,p,1,0,"ion-col",19),s.Mb(35,"ion-col",17),s.Qb(),s.xc(36,M,15,16,"ion-item-sliding",20),s.xc(37,A,2,1,"ng-container",21),s.Rb(38,"ion-infinite-scroll",22),s.Zb("ionInfinite",function(e){return n.paginate(null,e)}),s.Mb(39,"ion-infinite-scroll-content",23),s.Qb(),s.xc(40,S,6,1,"ion-row",24),s.xc(41,_,4,0,"ion-row",25),s.Qb(),s.Qb(),s.Qb(),s.Qb()),2&e&&(s.zb(6),s.jc("ifAuth",s.mc(12,v,s.lc(11,y))),s.zb(1),s.kc("color",n.showFilter?"medium":"white"),s.zb(8),s.jc("hidden",!n.showFilter),s.zb(2),s.jc("ngModel",n.filters.id),s.zb(3),s.jc("ngModel",n.filters.name),s.zb(3),s.jc("ngModel",n.filters.email),s.zb(11),s.jc("ifAuth",s.mc(15,v,s.lc(14,Q))),s.zb(2),s.jc("ngForOf",n.users),s.zb(1),s.jc("ngIf",n.loading),s.zb(3),s.jc("ngIf",n.total_of_data===n.users.length&&n.total_of_data>0),s.zb(1),s.jc("ngIf",!n.loading&&!n.users.length))},directives:[r.n,r.O,r.A,r.M,r.g,b.a,r.f,r.o,r.k,r.C,r.D,r.F,r.j,r.y,r.t,r.G,r.Z,u.g,u.h,d.k,d.l,r.p,r.q,r.Y,t.g,r.w,r.s,d.j,r.H,r.x],styles:[""]}),e})();var I=i("HJNQ");const F=[{path:"",component:C}];let O=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=s.Jb({type:e}),e.\u0275inj=s.Ib({imports:[[I.a,t.i.forChild(F)]]}),e})()}}]);
