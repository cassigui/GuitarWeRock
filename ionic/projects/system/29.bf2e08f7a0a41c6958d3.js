(window.webpackJsonp=window.webpackJsonp||[]).push([[29],{"7CPf":function(e,t,i){"use strict";i.r(t),i.d(t,"IndexPageModule",function(){return z});var n=i("tyNb"),o=i("HJNQ"),r=i("mrSG"),s=i("TEn/"),c=i("x2DL");class l extends c.a{constructor(e={}){super(),this.id=null,this.log_name=null,this.description=null,this.subject_type=null,this.subject_id=null,this.causer_type=null,this.causer_id=null,this.properties=null,this.causer={},this.created_at=null,this.updated_at=null,super.serialize(e)}get relations(){return{}}get dates(){return["created_at","updated_at","deleted_at"]}get http_data(){return{id:this.id,log_name:this.log_name,description:this.description,subject_type:this.subject_type,subject_id:this.subject_id,causer_type:this.causer_type,causer_id:this.causer_id,properties:this.properties}}}var a=i("fXoL"),d=i("Uep1");let u=(()=>{class e extends d.a{constructor(e){super(e),this.url="auditings"}}return e.\u0275fac=function(t){return new(t||e)(a.Vb(a.t))},e.\u0275prov=a.Hb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var b=i("IfTO"),h=i("3Pt+"),g=i("ofXK");const p=["search"];function f(e,t){if(1&e&&(a.Rb(0,"ion-item"),a.Rb(1,"ion-col",15),a.zc(2),a.Qb(),a.Rb(3,"ion-col",16),a.zc(4),a.Qb(),a.Rb(5,"ion-col",17),a.zc(6),a.Qb(),a.Rb(7,"ion-col",17),a.zc(8),a.Qb(),a.Qb()),2&e){const e=t.$implicit;a.zb(2),a.Bc("#",e.id,""),a.zb(2),a.Dc(" ",e.subject_type," #",e.subject_id," ",e.description," "),a.zb(2),a.Bc(" ",null==e.causer?null:e.causer.name," "),a.zb(2),a.Bc(" ",e.created_at.format("MMM DD, YYYY")," ")}}function m(e,t){1&e&&(a.Rb(0,"div"),a.Mb(1,"ion-skeleton-text",24),a.Qb())}function _(e,t){if(1&e&&(a.Pb(0),a.xc(1,m,2,0,"div",18),a.Ob()),2&e){const e=a.dc();a.zb(1),a.jc("ngForOf",e.trs)}}function R(e,t){if(1&e){const e=a.Sb();a.Rb(0,"ion-row",25),a.Rb(1,"ion-col",26),a.Rb(2,"ion-icon",27),a.Zb("click",function(){return a.sc(e),a.dc().content.scrollToTop(500)}),a.Qb(),a.Rb(3,"ion-label",28),a.zc(4," Todos registros foram listados "),a.Mb(5,"ion-icon",29),a.Qb(),a.Qb(),a.Qb()}if(2&e){const e=a.dc();a.zb(2),a.jc("hidden",e.auditings.length<10)}}function v(e,t){1&e&&(a.Rb(0,"ion-row",30),a.Rb(1,"ion-col",26),a.Rb(2,"ion-label",31),a.zc(3,"  Não há registros. "),a.Qb(),a.Qb(),a.Qb())}const Q=[{path:"",component:(()=>{class e{constructor(e,t){this.auditingService=e,this.helperService=t,this.auditings=[],this.loading=!1,this.filters={name:null,comment:null},this.total_of_data=0,this._paginate={take:40,page:1},this.trs=new Array(5),this.tds=new Array(1)}ngOnInit(){}ionViewWillEnter(){this.paginate(null,null)}getFilters(){var e={};return Object.keys(this.filters).forEach(t=>{this.filters[t]&&(e[t]="%"+this.filters[t]+"%")},this),e.orderBy="!id",e}paginate(e=null,t=null){return Object(r.a)(this,void 0,void 0,function*(){(null!==e||null==e&&null==t)&&(this.auditings=[],this._paginate.page=1),this.loading=!0,this.auditingService.get(["causer"],this.getFilters(),this._paginate).then(i=>Object(r.a)(this,void 0,void 0,function*(){this.total_of_data=i.auditings.total,this._paginate.page=i.auditings.current_page+1;for(let e of i.auditings.data)this.auditings.push(new l(e));this.loading=!1,e&&e.target.complete(),t&&t.target.complete()}),e=>{this.helperService.responseErrors(e)})})}remove(e,t,i){return Object(r.a)(this,void 0,void 0,function*(){let n=yield this.helperService.popover(t,"He is sure?",[{text:"back",color:"gray",value:!1},{text:"remove",color:"danger",value:!0}]);n.onDidDismiss().then(t=>{!0===t.data?(this.helperService.loading("Removendo"),this.destroy(e,i)):i.close()}),n.present()})}destroy(e,t){this.auditingService.destroy(e.id).then(i=>{if(!i.error){var n=this.auditings.findIndex(t=>t.id==e.id);n>-1&&this.auditings.splice(n,1)}this.helperService.toast(i.error?"warning":"success",i.message),t.close()},e=>{this.helperService.responseErrors(e)}).then(()=>this.helperService.loading_dismiss())}toggleSearch(){this.showFilter=!this.showFilter,this.showFilter&&setTimeout(()=>{this.search.setFocus()},100)}}return e.\u0275fac=function(t){return new(t||e)(a.Lb(u),a.Lb(b.a))},e.\u0275cmp=a.Fb({type:e,selectors:[["app-index"]],viewQuery:function(e,t){if(1&e&&(a.Ec(p,1),a.Ec(s.k,1),a.Ec(s.p,1)),2&e){let e;a.pc(e=a.ac())&&(t.search=e.first),a.pc(e=a.ac())&&(t.content=e.first),a.pc(e=a.ac())&&(t.infiniteScroll=e.first)}},decls:37,vars:8,consts:[["mode","ios"],["mode","ios","slot","start"],[3,"click"],["slot","end"],["mode","ios",3,"color","click"],["name","funnel"],[1,"ion-no-padding"],["slot","fixed",1,"text-darkprimary",3,"ionRefresh"],["pullingText","Atualizar","refreshingSpinner","dots","refreshingText","Atualizando"],["lines","full","mode","ios",1,"no-border","mb-0"],["color","customer","mode","ios",3,"hidden"],["debounce","250","mode","ios","placeholder","id ...",1,"p0","input-light",3,"ngModel","ngModelChange","ionChange"],["search",""],["debounce","250","mode","ios","placeholder","causer ...",1,"p0","input-light",3,"ngModel","ngModelChange","ionChange"],["mode","md"],["size","2"],["size","4"],["size","3"],[4,"ngFor","ngForOf"],[4,"ngIf"],["threshold","30px",3,"ionInfinite"],["loadingSpinner","none"],["class","no-border","text-center","",4,"ngIf"],["color","light","text-center","",4,"ngIf"],["animated","",2,"width","100%","height","50px"],["text-center","",1,"no-border"],[1,"text-center"],["color","medium","size","large","name","caret-up-circle-outline",1,"ion-float-end","mt-15",3,"hidden","click"],["color","medium",1,"p20"],["name","thumbs-up","color","medium"],["color","light","text-center",""],["padding-top","","padding-bottom",""]],template:function(e,t){1&e&&(a.Rb(0,"ion-header"),a.Rb(1,"ion-toolbar",0),a.Mb(2,"ion-menu-button",1),a.Rb(3,"ion-title",2),a.Zb("click",function(){return t.content.scrollToTop(500)}),a.zc(4,"Auditing"),a.Qb(),a.Rb(5,"ion-buttons",3),a.Rb(6,"ion-button",4),a.Zb("click",function(){return t.toggleSearch()}),a.Mb(7,"ion-icon",5),a.Qb(),a.Qb(),a.Qb(),a.Qb(),a.Rb(8,"ion-content",6),a.Rb(9,"ion-refresher",7),a.Zb("ionRefresh",function(e){return t.paginate(e)}),a.Mb(10,"ion-refresher-content",8),a.Qb(),a.Rb(11,"ion-row"),a.Rb(12,"ion-col",6),a.Rb(13,"ion-list",9),a.Rb(14,"ion-item-divider",10),a.Rb(15,"ion-col"),a.Rb(16,"ion-searchbar",11,12),a.Zb("ngModelChange",function(e){return t.filters.id=e})("ionChange",function(){return t.paginate()}),a.Qb(),a.Qb(),a.Rb(18,"ion-col"),a.Rb(19,"ion-searchbar",13,12),a.Zb("ngModelChange",function(e){return t.filters.causer_name=e})("ionChange",function(){return t.paginate()}),a.Qb(),a.Qb(),a.Qb(),a.Rb(21,"ion-item-divider",14),a.Rb(22,"ion-col",15),a.zc(23,"#Id"),a.Qb(),a.Rb(24,"ion-col",16),a.zc(25,"Action"),a.Qb(),a.Rb(26,"ion-col",17),a.zc(27,"Causer"),a.Qb(),a.Rb(28,"ion-col",17),a.zc(29,"Date"),a.Qb(),a.Qb(),a.Rb(30,"ion-list"),a.xc(31,f,9,6,"ion-item",18),a.Qb(),a.xc(32,_,2,1,"ng-container",19),a.Rb(33,"ion-infinite-scroll",20),a.Zb("ionInfinite",function(e){return t.paginate(null,e)}),a.Mb(34,"ion-infinite-scroll-content",21),a.Qb(),a.xc(35,R,6,1,"ion-row",22),a.xc(36,v,4,0,"ion-row",23),a.Qb(),a.Qb(),a.Qb(),a.Qb()),2&e&&(a.zb(6),a.kc("color",t.showFilter?"medium":"white"),a.zb(8),a.jc("hidden",!t.showFilter),a.zb(2),a.jc("ngModel",t.filters.id),a.zb(3),a.jc("ngModel",t.filters.causer_name),a.zb(12),a.jc("ngForOf",t.auditings),a.zb(1),a.jc("ngIf",t.loading),a.zb(3),a.jc("ngIf",t.total_of_data===t.auditings.length&&t.total_of_data>0),a.zb(1),a.jc("ngIf",!t.loading&&!t.auditings.length))},directives:[s.n,s.O,s.A,s.M,s.g,s.f,s.o,s.k,s.C,s.D,s.F,s.j,s.y,s.t,s.G,s.Z,h.g,h.h,g.k,g.l,s.p,s.q,s.s,s.H,s.x],styles:[""]}),e})()}];let z=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=a.Jb({type:e}),e.\u0275inj=a.Ib({imports:[[o.a,n.i.forChild(Q)]]}),e})()}}]);
