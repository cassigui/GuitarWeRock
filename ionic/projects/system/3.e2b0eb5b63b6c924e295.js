(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{J24N:function(e,s,i){"use strict";i.r(s),i.d(s,"CreatePageModule",function(){return z});var o=i("tyNb"),r=i("RqZA"),t=i("gcOz"),n=i("GR5b"),c=i("fXoL"),a=i("IfTO"),l=i("CzVY"),b=i("Uep1");let h=(()=>{class e extends b.a{constructor(e){super(e),this.url="user-permissions",this.prefix="wf-api"}}return e.\u0275fac=function(s){return new(s||e)(c.Vb(c.t))},e.\u0275prov=c.Hb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),p=(()=>{class e extends b.a{constructor(e){super(e),this.url="user-permission-categories",this.prefix="wf-api"}}return e.\u0275fac=function(s){return new(s||e)(c.Vb(c.t))},e.\u0275prov=c.Hb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var d=i("TEn/"),g=i("3Pt+"),m=i("ofXK");const v=function(e){return{"text-primary":e}};function u(e,s){if(1&e){const e=c.Sb();c.Rb(0,"ion-col",3),c.Rb(1,"ion-label",19),c.zc(2),c.Qb(),c.Rb(3,"ion-toggle",20),c.Zb("ngModelChange",function(s){return c.sc(e),c.dc().$implicit.pivot.allow=s}),c.Qb(),c.Qb()}if(2&e){const e=c.dc().$implicit;c.zb(1),c.jc("ngClass",c.mc(3,v,e.pivot.allow)),c.zb(1),c.Bc("",e.name," "),c.zb(1),c.jc("ngModel",e.pivot.allow)}}function f(e,s){if(1&e&&(c.Pb(0),c.xc(1,u,4,5,"ion-col",18),c.Ob()),2&e){const e=s.$implicit,i=c.dc().$implicit;c.zb(1),c.jc("ngIf",e.category.id==i.id)}}function w(e,s){if(1&e&&(c.Rb(0,"ion-row",15),c.Rb(1,"ion-col"),c.Rb(2,"h3",16),c.zc(3),c.Qb(),c.Rb(4,"ion-row"),c.xc(5,f,2,1,"ng-container",17),c.Qb(),c.Qb(),c.Qb()),2&e){const e=s.$implicit,i=c.dc();c.zb(3),c.Ac(e.name),c.zb(2),c.jc("ngForOf",i.access_level.permissions)}}const S=function(){return["/access-levels"]};let R=(()=>{class e{constructor(e,s,i,o,t,n){this.route=e,this.router=s,this.helperService=i,this.accessLevelService=o,this.permissionService=t,this.permissionCategoryService=n,this.permissions=[],this.permission_categories=[],this.editing=!1,this.access_level=new r.a}ngOnInit(){}ionViewWillEnter(){this.getPermissionCategories(),this.id=this.route.snapshot.paramMap.get("id")?parseInt(this.route.snapshot.paramMap.get("id")):null,this.getPermissions(),this.find(this.id)}find(e){e&&(this.editing=!0,this.getAccessLevel())}getAccessLevel(){this.accessLevelService.find(["permissions.category"],{id:this.id}).then(e=>{this.access_level=new r.a(e.access_level),this.access_level.syncPermissions(this.permissions)},e=>{this.helperService.responseErrors(e)})}save(){this.access_level.id>0?this.update():this.store()}store(){this.helperService.loading("Saving"),this.accessLevelService.store(this.access_level).then(e=>{if(e.error)return this.helperService.loading_dismiss(),this.helperService.toast("danger",e.message),!1;this.helperService.toast("success",e.message),this.access_level.id=e.access_level.id,this.helperService.loading_dismiss(),this.router.navigate(["access-levels",e.access_level.id],{state:{force:!0}})},e=>{this.helperService.loading_dismiss(),this.helperService.responseErrors(e)})}update(){this.helperService.loading("Saving"),this.accessLevelService.update(this.access_level).then(e=>{if(e.error)return this.helperService.loading_dismiss(),this.helperService.toast("danger",e.message),!1;this.helperService.loading_dismiss(),this.helperService.toast("success",e.message)},e=>{this.helperService.loading_dismiss(),this.helperService.responseErrors(e)})}getPermissions(){this.permissionService.get(["category"]).then(e=>{e.error?(this.permissions=[],this.helperService.toast("danger",e.message)):this.permissions=e.user_permissions.map(e=>new t.a(e)),this.access_level.syncPermissions(this.permissions)},e=>{this.helperService.responseErrors(e)})}getPermissionCategories(){this.permissionCategoryService.get().then(e=>{e.error?(this.permission_categories=[],this.helperService.toast("danger",e.message)):this.permission_categories=e.user_permission_categories.map(e=>new n.a(e))},e=>{this.helperService.responseErrors(e)})}}return e.\u0275fac=function(s){return new(s||e)(c.Lb(o.a),c.Lb(o.f),c.Lb(a.a),c.Lb(l.a),c.Lb(h),c.Lb(p))},e.\u0275cmp=c.Fb({type:e,selectors:[["app-create"]],decls:29,vars:6,consts:[["mode","ios"],["slot","start"],["mode","ios","text","","icon","chevron-back-outline","routerLink","back",3,"routerLink"],[1,"ion-no-padding"],["color","white","no-margin","","mode","ios"],["size-sm","9"],["color","medium",1,"fw-600"],[1,"input-light",3,"ngModel","ngModelChange"],["size","3","size-sm","3"],["mode","md","color","success",3,"ngModel","ngModelChange"],["margin-top",""],["no-margin","","color","medium",1,"fw-600"],["style","border-bottom: 1px solid #f1f1f1","class","mb-15",4,"ngFor","ngForOf"],["size-sm","4"],["expand","full","shape","round","mode","ios","color","success",3,"click"],[1,"mb-15",2,"border-bottom","1px solid #f1f1f1"],[1,"text-darkprimary","fw-600"],[4,"ngFor","ngForOf"],["class","ion-no-padding",4,"ngIf"],["no-margin","",1,"fw-600",3,"ngClass"],["mode","md","size","small","color","primary",1,"pl-5",3,"ngModel","ngModelChange"]],template:function(e,s){1&e&&(c.Rb(0,"ion-header"),c.Rb(1,"ion-toolbar",0),c.Rb(2,"ion-buttons",1),c.Mb(3,"ion-back-button",2),c.Qb(),c.Rb(4,"ion-title"),c.zc(5),c.Qb(),c.Qb(),c.Qb(),c.Rb(6,"ion-content",3),c.Rb(7,"ion-row"),c.Rb(8,"ion-col",3),c.Rb(9,"ion-card",4),c.Rb(10,"ion-card-content"),c.Rb(11,"ion-row"),c.Rb(12,"ion-col",5),c.Rb(13,"ion-label",6),c.zc(14,"Nome"),c.Qb(),c.Rb(15,"ion-input",7),c.Zb("ngModelChange",function(e){return s.access_level.name=e}),c.Qb(),c.Qb(),c.Rb(16,"ion-col",8),c.Rb(17,"ion-label",6),c.zc(18,"Active"),c.Qb(),c.Rb(19,"ion-toggle",9),c.Zb("ngModelChange",function(e){return s.access_level.active=e}),c.Qb(),c.Qb(),c.Qb(),c.Rb(20,"ion-row",10),c.Rb(21,"ion-col"),c.Rb(22,"ion-label",11),c.zc(23,"Permiss\xf5es"),c.Qb(),c.Qb(),c.Qb(),c.xc(24,w,6,2,"ion-row",12),c.Rb(25,"ion-row"),c.Rb(26,"ion-col",13),c.Rb(27,"ion-button",14),c.Zb("click",function(){return s.save()}),c.zc(28," Save "),c.Qb(),c.Qb(),c.Qb(),c.Qb(),c.Qb(),c.Qb(),c.Qb(),c.Qb()),2&e&&(c.zb(3),c.jc("routerLink",c.lc(5,S)),c.zb(2),c.Bc("",s.editing?"Editando":"Novo"," n\xedvel de acesso"),c.zb(10),c.jc("ngModel",s.access_level.name),c.zb(4),c.jc("ngModel",s.access_level.active),c.zb(5),c.jc("ngForOf",s.permission_categories))},directives:[d.n,d.O,d.g,d.d,d.e,d.Y,o.g,d.M,d.k,d.F,d.j,d.h,d.i,d.x,d.r,d.Z,g.g,g.h,d.N,d.b,m.k,d.f,m.l,m.j],styles:[""]}),e})();var Q=i("HJNQ");const _=[{path:"",component:R}];let z=(()=>{class e{}return e.\u0275fac=function(s){return new(s||e)},e.\u0275mod=c.Jb({type:e}),e.\u0275inj=c.Ib({imports:[[Q.a,o.i.forChild(_)]]}),e})()}}]);