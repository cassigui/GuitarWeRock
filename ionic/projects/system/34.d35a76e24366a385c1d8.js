(window.webpackJsonp=window.webpackJsonp||[]).push([[34],{"e/WF":function(e,n,t){"use strict";t.r(n),t.d(n,"IndexPageModule",function(){return A});var i=t("tyNb"),o=t("HJNQ"),r=t("mrSG"),c=t("TEn/"),s=t("61pG"),l=t("fXoL"),a=t("0T40"),b=t("IfTO"),d=t("G2dz"),u=t("3Pt+"),h=t("ofXK");const p=["search"],f=function(){return["/crops/create"]};function g(e,n){1&e&&(l.Rb(0,"ion-button",23),l.Mb(1,"ion-icon",24),l.Qb()),2&e&&l.jc("routerLink",l.lc(1,f))}const m=function(e){return["/crops",e]};function v(e,n){if(1&e&&(l.Rb(0,"ion-button",30),l.Mb(1,"ion-icon",31),l.zc(2," edit "),l.Qb()),2&e){const e=l.dc().$implicit;l.jc("routerLink",l.mc(1,m,e.id))}}function R(e,n){if(1&e){const e=l.Sb();l.Rb(0,"ion-button",32),l.Zb("click",function(n){l.sc(e);const t=l.dc().$implicit;return l.dc().remove(t,n)}),l.Mb(1,"ion-icon",33),l.zc(2," remove "),l.Qb()}}const Q=function(e,n){return{"text-success":e,"text-danger":n}},x=function(){return{update:"crops"}},z=function(e){return[e]},w=function(){return{delete:"crops"}};function k(e,n){if(1&e&&(l.Rb(0,"ion-item",null,25),l.Rb(2,"ion-col",16),l.zc(3),l.Qb(),l.Rb(4,"ion-col",16),l.zc(5),l.Qb(),l.Rb(6,"ion-col",16),l.Mb(7,"ion-icon",26),l.zc(8),l.Qb(),l.Rb(9,"ion-col",27),l.xc(10,v,3,3,"ion-button",28),l.xc(11,R,3,0,"ion-button",29),l.Qb(),l.Qb()),2&e){const e=n.$implicit;l.zb(3),l.Bc("#",e.id,""),l.zb(2),l.Bc(" ",e.name," "),l.zb(2),l.jc("ngClass",l.nc(6,Q,e.active,!e.active)),l.zb(1),l.Bc(" ",e.active?"Active":"Inactive"," "),l.zb(2),l.jc("ifAuth",l.mc(10,z,l.lc(9,x))),l.zb(1),l.jc("ifAuth",l.mc(13,z,l.lc(12,w)))}}function j(e,n){1&e&&(l.Rb(0,"div"),l.Mb(1,"ion-skeleton-text",34),l.Qb())}function M(e,n){if(1&e&&(l.Pb(0),l.xc(1,j,2,0,"div",17),l.Ob()),2&e){const e=l.dc();l.zb(1),l.jc("ngForOf",e.trs)}}function S(e,n){if(1&e){const e=l.Sb();l.Rb(0,"ion-row",35),l.Rb(1,"ion-col",36),l.Rb(2,"ion-icon",37),l.Zb("click",function(){return l.sc(e),l.dc().content.scrollToTop(500)}),l.Qb(),l.Rb(3,"ion-label",38),l.zc(4," Todos registros foram listados "),l.Mb(5,"ion-icon",39),l.Qb(),l.Qb(),l.Qb()}if(2&e){const e=l.dc();l.zb(2),l.jc("hidden",e.crops.length<10)}}function y(e,n){1&e&&(l.Rb(0,"ion-row",40),l.Rb(1,"ion-col",36),l.Rb(2,"ion-label",41),l.zc(3,"  Não há registros. "),l.Qb(),l.Qb(),l.Qb())}const I=function(){return{create:"crops"}},F=[{path:"",component:(()=>{class e{constructor(e,n){this.cropService=e,this.helperService=n,this.crops=[],this.loading=!1,this.filters={name:null},this.total_of_data=0,this._paginate={take:30,page:1},this.trs=new Array(5),this.tds=new Array(1)}ngOnInit(){}ionViewWillEnter(){this.paginate(null,null)}getFilters(){var e={};return Object.keys(this.filters).forEach(n=>{this.filters[n]&&(e[n]="%"+this.filters[n]+"%")},this),e}paginate(e=null,n=null){return Object(r.a)(this,void 0,void 0,function*(){(null!==e||null==e&&null==n)&&(this.crops=[],this._paginate.page=1),this.loading=!0,this.cropService.get([],this.getFilters(),this._paginate).then(t=>Object(r.a)(this,void 0,void 0,function*(){this.total_of_data=t.crops.total,this._paginate.page=t.crops.current_page+1;for(let e of t.crops.data)this.crops.push(new s.a(e));this.loading=!1,e&&e.target.complete(),n&&n.target.complete()}),e=>{this.helperService.responseErrors(e)})})}remove(e,n){return Object(r.a)(this,void 0,void 0,function*(){let t=yield this.helperService.popover(n,"He is sure?",[{text:"back",color:"gray",value:!1},{text:"remove",color:"danger",value:!0}]);t.onDidDismiss().then(n=>{!0===n.data&&(this.helperService.loading("Removendo"),this.destroy(e))}),t.present()})}destroy(e){this.cropService.destroy(e.id).then(n=>{if(!n.error){var t=this.crops.findIndex(n=>n.id==e.id);t>-1&&this.crops.splice(t,1)}this.helperService.toast(n.error?"warning":"success",n.message)},e=>{this.helperService.responseErrors(e)}).then(()=>this.helperService.loading_dismiss())}toggleSearch(){this.showFilter=!this.showFilter,this.showFilter&&setTimeout(()=>{this.search.setFocus()},100)}}return e.\u0275fac=function(n){return new(n||e)(l.Lb(a.a),l.Lb(b.a))},e.\u0275cmp=l.Fb({type:e,selectors:[["app-index"]],viewQuery:function(e,n){if(1&e&&(l.Ec(p,1),l.Ec(c.k,1),l.Ec(c.p,1)),2&e){let e;l.pc(e=l.ac())&&(n.search=e.first),l.pc(e=l.ac())&&(n.content=e.first),l.pc(e=l.ac())&&(n.infiniteScroll=e.first)}},decls:36,vars:12,consts:[["mode","ios"],["mode","ios","slot","start"],[3,"click"],["slot","end"],["mode","ios","color","white",3,"routerLink",4,"ifAuth"],["mode","ios",3,"color","click"],["name","funnel"],[1,"ion-no-padding"],["slot","fixed",1,"text-darkprimary",3,"ionRefresh"],["pullingText","Atualizar","refreshingSpinner","dots","refreshingText","Atualizando"],["lines","full","mode","ios",1,"no-border","mb-0"],["color","customer","mode","md",3,"hidden"],["debounce","250","mode","ios","placeholder","id ...",1,"p0","input-light",3,"ngModel","ngModelChange","ionChange"],["search",""],["debounce","250","mode","ios","placeholder","nome ...",1,"p0","input-light",3,"ngModel","ngModelChange","ionChange"],["mode","md"],["size","3"],[4,"ngFor","ngForOf"],[4,"ngIf"],["threshold","30px",3,"ionInfinite"],["loadingSpinner","none"],["class","no-border","text-center","",4,"ngIf"],["color","light","text-center","",4,"ngIf"],["mode","ios","color","white",3,"routerLink"],["name","add-circle"],["slidingItem",""],["name","radio-button-on-outline",3,"ngClass"],["size","3",1,"block","text-right"],["color","primary","class","text-center","expandable","",3,"routerLink",4,"ifAuth"],["color","danger","expandable","","class","text-center",3,"click",4,"ifAuth"],["color","primary","expandable","",1,"text-center",3,"routerLink"],["slot","start","name","create",1,"m0"],["color","danger","expandable","",1,"text-center",3,"click"],["slot","start","name","trash",1,"m0"],["animated","",2,"width","100%","height","50px"],["text-center","",1,"no-border"],[1,"text-center"],["color","medium","size","large","name","caret-up-circle-outline","float-right","",1,"mt-15","ion-float-end",3,"hidden","click"],["color","medium",1,"p20"],["name","thumbs-up","color","medium"],["color","light","text-center",""],["padding-top","","padding-bottom",""]],template:function(e,n){1&e&&(l.Rb(0,"ion-header"),l.Rb(1,"ion-toolbar",0),l.Mb(2,"ion-menu-button",1),l.Rb(3,"ion-title",2),l.Zb("click",function(){return n.content.scrollToTop(500)}),l.zc(4,"Crops"),l.Qb(),l.Rb(5,"ion-buttons",3),l.xc(6,g,2,2,"ion-button",4),l.Rb(7,"ion-button",5),l.Zb("click",function(){return n.toggleSearch()}),l.Mb(8,"ion-icon",6),l.Qb(),l.Qb(),l.Qb(),l.Qb(),l.Rb(9,"ion-content",7),l.Rb(10,"ion-refresher",8),l.Zb("ionRefresh",function(e){return n.paginate(e)}),l.Mb(11,"ion-refresher-content",9),l.Qb(),l.Rb(12,"ion-row"),l.Rb(13,"ion-col",7),l.Rb(14,"ion-list",10),l.Rb(15,"ion-item-divider",11),l.Rb(16,"ion-col"),l.Rb(17,"ion-searchbar",12,13),l.Zb("ngModelChange",function(e){return n.filters.id=e})("ionChange",function(){return n.paginate()}),l.Qb(),l.Qb(),l.Rb(19,"ion-col"),l.Rb(20,"ion-searchbar",14,13),l.Zb("ngModelChange",function(e){return n.filters.name=e})("ionChange",function(){return n.paginate()}),l.Qb(),l.Qb(),l.Qb(),l.Rb(22,"ion-item-divider",15),l.Rb(23,"ion-col",16),l.zc(24,"#Id"),l.Qb(),l.Rb(25,"ion-col",16),l.zc(26,"Name"),l.Qb(),l.Rb(27,"ion-col",16),l.zc(28,"Active"),l.Qb(),l.Mb(29,"ion-col",16),l.Qb(),l.xc(30,k,12,15,"ion-item",17),l.xc(31,M,2,1,"ng-container",18),l.Rb(32,"ion-infinite-scroll",19),l.Zb("ionInfinite",function(e){return n.paginate(null,e)}),l.Mb(33,"ion-infinite-scroll-content",20),l.Qb(),l.xc(34,S,6,1,"ion-row",21),l.xc(35,y,4,0,"ion-row",22),l.Qb(),l.Qb(),l.Qb(),l.Qb()),2&e&&(l.zb(6),l.jc("ifAuth",l.mc(10,z,l.lc(9,I))),l.zb(1),l.kc("color",n.showFilter?"medium":"white"),l.zb(8),l.jc("hidden",!n.showFilter),l.zb(2),l.jc("ngModel",n.filters.id),l.zb(3),l.jc("ngModel",n.filters.name),l.zb(10),l.jc("ngForOf",n.crops),l.zb(1),l.jc("ngIf",n.loading),l.zb(3),l.jc("ngIf",n.total_of_data===n.crops.length&&n.total_of_data>0),l.zb(1),l.jc("ngIf",!n.loading&&!n.crops.length))},directives:[c.n,c.O,c.A,c.M,c.g,d.a,c.f,c.o,c.k,c.C,c.D,c.F,c.j,c.y,c.t,c.G,c.Z,u.g,u.h,h.k,h.l,c.p,c.q,c.Y,i.g,c.s,h.j,c.H,c.x],encapsulation:2}),e})()}];let A=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=l.Jb({type:e}),e.\u0275inj=l.Ib({providers:[],imports:[[o.a,i.i.forChild(F)]]}),e})()}}]);
