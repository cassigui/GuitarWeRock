(window.webpackJsonp=window.webpackJsonp||[]).push([[37],{xwxq:function(n,e,t){"use strict";t.r(e),t.d(e,"IndexPageModule",function(){return I});var o=t("tyNb"),i=t("HJNQ"),r=t("mrSG"),c=t("TEn/"),l=t("rk6i"),s=t("fXoL"),a=t("mzha"),b=t("IfTO"),u=t("G2dz"),d=t("3Pt+"),f=t("ofXK");const h=["search"],m=function(){return["/formulations/create"]};function g(n,e){1&n&&(s.Rb(0,"ion-button",24),s.Mb(1,"ion-icon",25),s.Qb()),2&n&&s.jc("routerLink",s.lc(1,m))}const p=function(n){return["/formulations",n]};function x(n,e){if(1&n&&(s.Rb(0,"ion-button",30),s.Mb(1,"ion-icon",31),s.zc(2," edit "),s.Qb()),2&n){const n=s.dc().$implicit;s.jc("routerLink",s.mc(1,p,n.id))}}function R(n,e){if(1&n){const n=s.Sb();s.Rb(0,"ion-button",32),s.Zb("click",function(e){s.sc(n);const t=s.dc().$implicit;return s.dc().remove(t,e)}),s.Mb(1,"ion-icon",33),s.zc(2," remove "),s.Qb()}}const v=function(){return{update:"formulations"}},Q=function(n){return[n]},z=function(){return{delete:"formulations"}};function w(n,e){if(1&n&&(s.Rb(0,"ion-item",null,26),s.Rb(2,"ion-col",16),s.zc(3),s.Qb(),s.Rb(4,"ion-col",17),s.zc(5),s.Qb(),s.Rb(6,"ion-col",27),s.xc(7,x,3,3,"ion-button",28),s.xc(8,R,3,0,"ion-button",29),s.Qb(),s.Qb()),2&n){const n=e.$implicit;s.zb(3),s.Bc("#",n.id,""),s.zb(2),s.Bc(" ",n.name," "),s.zb(2),s.jc("ifAuth",s.mc(5,Q,s.lc(4,v))),s.zb(1),s.jc("ifAuth",s.mc(8,Q,s.lc(7,z)))}}function k(n,e){1&n&&(s.Rb(0,"div"),s.Mb(1,"ion-skeleton-text",34),s.Qb())}function j(n,e){if(1&n&&(s.Pb(0),s.xc(1,k,2,0,"div",18),s.Ob()),2&n){const n=s.dc();s.zb(1),s.jc("ngForOf",n.trs)}}function M(n,e){if(1&n){const n=s.Sb();s.Rb(0,"ion-row",35),s.Rb(1,"ion-col",36),s.Rb(2,"ion-icon",37),s.Zb("click",function(){return s.sc(n),s.dc().content.scrollToTop(500)}),s.Qb(),s.Rb(3,"ion-label",38),s.zc(4," Todos registros foram listados "),s.Mb(5,"ion-icon",39),s.Qb(),s.Qb(),s.Qb()}if(2&n){const n=s.dc();s.zb(2),s.jc("hidden",n.formulations.length<10)}}function S(n,e){1&n&&(s.Rb(0,"ion-row",40),s.Rb(1,"ion-col",36),s.Rb(2,"ion-label",41),s.zc(3,"  Não há registros. "),s.Qb(),s.Qb(),s.Qb())}const y=function(){return{create:"formulations"}},F=[{path:"",component:(()=>{class n{constructor(n,e){this.formulationService=n,this.helperService=e,this.formulations=[],this.loading=!1,this.filters={name:null},this.total_of_data=0,this._paginate={take:30,page:1},this.trs=new Array(5),this.tds=new Array(1)}ngOnInit(){}ionViewWillEnter(){this.paginate(null,null)}getFilters(){var n={};return Object.keys(this.filters).forEach(e=>{this.filters[e]&&(n[e]="%"+this.filters[e]+"%")},this),n}paginate(n=null,e=null){return Object(r.a)(this,void 0,void 0,function*(){(null!==n||null==n&&null==e)&&(this.formulations=[],this._paginate.page=1),this.loading=!0,this.formulationService.get([],this.getFilters(),this._paginate).then(t=>Object(r.a)(this,void 0,void 0,function*(){this.total_of_data=t.formulations.total,this._paginate.page=t.formulations.current_page+1;for(let n of t.formulations.data)this.formulations.push(new l.a(n));this.loading=!1,n&&n.target.complete(),e&&e.target.complete()}),n=>{this.helperService.responseErrors(n)})})}remove(n,e){return Object(r.a)(this,void 0,void 0,function*(){let t=yield this.helperService.popover(e,"He is sure?",[{text:"back",color:"gray",value:!1},{text:"remove",color:"danger",value:!0}]);t.onDidDismiss().then(e=>{!0===e.data&&(this.helperService.loading("Removendo"),this.destroy(n))}),t.present()})}destroy(n){this.formulationService.destroy(n.id).then(e=>{if(!e.error){var t=this.formulations.findIndex(e=>e.id==n.id);t>-1&&this.formulations.splice(t,1)}this.helperService.toast(e.error?"warning":"success",e.message)},n=>{this.helperService.responseErrors(n)}).then(()=>this.helperService.loading_dismiss())}toggleSearch(){this.showFilter=!this.showFilter,this.showFilter&&setTimeout(()=>{this.search.setFocus()},100)}}return n.\u0275fac=function(e){return new(e||n)(s.Lb(a.a),s.Lb(b.a))},n.\u0275cmp=s.Fb({type:n,selectors:[["app-index"]],viewQuery:function(n,e){if(1&n&&(s.Ec(h,1),s.Ec(c.k,1),s.Ec(c.p,1)),2&n){let n;s.pc(n=s.ac())&&(e.search=n.first),s.pc(n=s.ac())&&(e.content=n.first),s.pc(n=s.ac())&&(e.infiniteScroll=n.first)}},decls:34,vars:12,consts:[["mode","ios"],["mode","ios","slot","start"],[3,"click"],["slot","end"],["mode","ios","color","white",3,"routerLink",4,"ifAuth"],["mode","ios",3,"color","click"],["name","funnel"],[1,"ion-no-padding"],["slot","fixed",1,"text-darkprimary",3,"ionRefresh"],["pullingText","Atualizar","refreshingSpinner","dots","refreshingText","Atualizando"],["lines","full","mode","ios",1,"no-border","mb-0"],["color","customer","mode","md",3,"hidden"],["debounce","250","mode","ios","placeholder","id ...",1,"p0",3,"ngModel","ngModelChange","ionChange"],["search",""],["debounce","250","mode","ios","placeholder","name ...",1,"p0",3,"ngModel","ngModelChange","ionChange"],["mode","md"],["size","3"],["size","6"],[4,"ngFor","ngForOf"],[4,"ngIf"],["threshold","30px",3,"ionInfinite"],["loadingSpinner","none"],["class","no-border","text-center","",4,"ngIf"],["color","light","text-center","",4,"ngIf"],["mode","ios","color","white",3,"routerLink"],["name","add-circle"],["slidingItem",""],["size","3",1,"block","text-right"],["color","primary","class","text-center","expandable","",3,"routerLink",4,"ifAuth"],["color","danger","expandable","","class","text-center",3,"click",4,"ifAuth"],["color","primary","expandable","",1,"text-center",3,"routerLink"],["slot","start","name","create",1,"m0"],["color","danger","expandable","",1,"text-center",3,"click"],["slot","start","name","trash",1,"m0"],["animated","",2,"width","100%","height","50px"],["text-center","",1,"no-border"],[1,"text-center"],["color","medium","size","large","name","caret-up-circle-outline",1,"mt-15","ion-float-end",3,"hidden","click"],["color","medium",1,"p20"],["name","thumbs-up","color","medium"],["color","light","text-center",""],["padding-top","","padding-bottom",""]],template:function(n,e){1&n&&(s.Rb(0,"ion-header"),s.Rb(1,"ion-toolbar",0),s.Mb(2,"ion-menu-button",1),s.Rb(3,"ion-title",2),s.Zb("click",function(){return e.content.scrollToTop(500)}),s.zc(4,"Formulations"),s.Qb(),s.Rb(5,"ion-buttons",3),s.xc(6,g,2,2,"ion-button",4),s.Rb(7,"ion-button",5),s.Zb("click",function(){return e.toggleSearch()}),s.Mb(8,"ion-icon",6),s.Qb(),s.Qb(),s.Qb(),s.Qb(),s.Rb(9,"ion-content",7),s.Rb(10,"ion-refresher",8),s.Zb("ionRefresh",function(n){return e.paginate(n)}),s.Mb(11,"ion-refresher-content",9),s.Qb(),s.Rb(12,"ion-row"),s.Rb(13,"ion-col",7),s.Rb(14,"ion-list",10),s.Rb(15,"ion-item-divider",11),s.Rb(16,"ion-col"),s.Rb(17,"ion-searchbar",12,13),s.Zb("ngModelChange",function(n){return e.filters.id=n})("ionChange",function(){return e.paginate()}),s.Qb(),s.Qb(),s.Rb(19,"ion-col"),s.Rb(20,"ion-searchbar",14,13),s.Zb("ngModelChange",function(n){return e.filters.name=n})("ionChange",function(){return e.paginate()}),s.Qb(),s.Qb(),s.Qb(),s.Rb(22,"ion-item-divider",15),s.Rb(23,"ion-col",16),s.zc(24,"#Id"),s.Qb(),s.Rb(25,"ion-col",17),s.zc(26,"Name"),s.Qb(),s.Mb(27,"ion-col",16),s.Qb(),s.xc(28,w,9,10,"ion-item",18),s.xc(29,j,2,1,"ng-container",19),s.Rb(30,"ion-infinite-scroll",20),s.Zb("ionInfinite",function(n){return e.paginate(null,n)}),s.Mb(31,"ion-infinite-scroll-content",21),s.Qb(),s.xc(32,M,6,1,"ion-row",22),s.xc(33,S,4,0,"ion-row",23),s.Qb(),s.Qb(),s.Qb(),s.Qb()),2&n&&(s.zb(6),s.jc("ifAuth",s.mc(10,Q,s.lc(9,y))),s.zb(1),s.kc("color",e.showFilter?"medium":"white"),s.zb(8),s.jc("hidden",!e.showFilter),s.zb(2),s.jc("ngModel",e.filters.id),s.zb(3),s.jc("ngModel",e.filters.name),s.zb(8),s.jc("ngForOf",e.formulations),s.zb(1),s.jc("ngIf",e.loading),s.zb(3),s.jc("ngIf",e.total_of_data===e.formulations.length&&e.total_of_data>0),s.zb(1),s.jc("ngIf",!e.loading&&!e.formulations.length))},directives:[c.n,c.O,c.A,c.M,c.g,u.a,c.f,c.o,c.k,c.C,c.D,c.F,c.j,c.y,c.t,c.G,c.Z,d.g,d.h,f.k,f.l,c.p,c.q,c.Y,o.g,c.s,c.H,c.x],encapsulation:2}),n})()}];let I=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=s.Jb({type:n}),n.\u0275inj=s.Ib({providers:[],imports:[[i.a,o.i.forChild(F)]]}),n})()}}]);
